<div class="flex-container">
  <form class="mt-3 mb-3 w-40">
    <div class="flex-wrapper">
      <div class="me-3 mb-3">
        <label for="name-input" class="form-label">Name / Description</label>
        <input type="text" class="form-control" id="name-input" min="0" [(ngModel)]="name" [ngModelOptions]="{ standalone: true }" />
      </div>
      <div class="me-3 mb-3">
        <label for="server-select" class="form-label">Artemis Server</label>
        <select
          id="server-select"
          class="form-select"
          aria-label="Artemis Server"
          [(ngModel)]="server"
          [ngModelOptions]="{ standalone: true }"
        >
          @for (server of availableServers; track server) {
            <option>{{ server }}</option>
          }
        </select>
      </div>
      <div class="me-3 mb-3">
        <label for="mode-select" class="form-label">Simulation Mode</label>
        <select
          id="mode-select"
          class="form-select"
          aria-label="Simulation Mode"
          [(ngModel)]="mode"
          [ngModelOptions]="{ standalone: true }"
        >
          @for (availableMode of availableModes; track availableMode) {
            <option [value]="availableMode">{{ getTextRepresentation(availableMode) }}</option>
          }
        </select>
      </div>
    </div>
    <div class="flex-wrapper mb-3">
      <label for="users-input" class="form-label">Users</label>
      <div class="input-group">
        <div class="input-group-text">
          <input
            class="form-check-input mt-0"
            type="checkbox"
            id="custom-users-check"
            [(ngModel)]="customizeUserRange"
            [ngModelOptions]="{ standalone: true }"
          />
          <label class="form-check-label ms-2" for="custom-users-check"> Customize </label>
        </div>
        <div>
          @if (!customizeUserRange) {
            <input
              type="number"
              class="form-control"
              id="users-input"
              min="0"
              [(ngModel)]="numberOfUsers"
              [ngModelOptions]="{ standalone: true }"
            />
          } @else {
            <input type="text" class="form-control" id="range-input" [(ngModel)]="userRange" [ngModelOptions]="{ standalone: true }" />
          }
        </div>
      </div>
      <div class="form-text mb-3">
        @if (!customizeUserRange) {
          Number of users. Users with IDs 1 to n will be used. See
          <a class="text-info" routerLink="/artemis-users/{{ server }}">Artemis Users</a> for the IDs of your users.
        } @else {
          Range of User-IDs to use, e.g. '1-26,39,65-110'. See
          <a class="text-info" routerLink="/artemis-users/{{ server }}">Artemis Users</a> for the IDs of your users.
        }
      </div>
    </div>
    @if (mode != Mode.CREATE_COURSE_AND_EXAM) {
      <div class="flex-wrapper">
        <div class="me-3 mb-3">
          <label for="course-input" class="form-label">Course ID</label>
          <input
            type="number"
            class="form-control"
            id="course-input"
            min="0"
            [(ngModel)]="courseId"
            [ngModelOptions]="{ standalone: true }"
          />
        </div>
        @if (mode != Mode.EXISTING_COURSE_CREATE_EXAM) {
          <div class="me-3 mb-3">
            <label for="exam-input" class="form-label">Exam ID</label>
            <input
              type="number"
              class="form-control"
              id="exam-input"
              min="0"
              [(ngModel)]="examId"
              [ngModelOptions]="{ standalone: true }"
            />
          </div>
        }
      </div>
    }
    <div class="mt-3 mb-2">Number of commits and pushes:</div>
    <div class="flex-wrapper">
      <div class="me-3">
        <label for="from-input" class="form-label">From</label>
        <input
          type="number"
          class="form-control"
          id="from-input"
          min="0"
          [(ngModel)]="numberOfCommitsAndPushesFrom"
          [ngModelOptions]="{ standalone: true }"
        />
      </div>
      <div class="me-3">
        <label for="to-input" class="form-label">To (excluded)</label>
        <input
          type="number"
          class="form-control"
          id="to-input"
          min="1"
          [(ngModel)]="numberOfCommitsAndPushesTo"
          [ngModelOptions]="{ standalone: true }"
        />
      </div>
    </div>
    <div class="form-text mb-3">
      For each student, the number of commits and pushes will be chosen randomly in the given range.<br />
      From must be positive and smaller than To.
    </div>
    <button type="submit" class="btn btn-primary mt-3" [disabled]="!inputValid()" (click)="createSimulation()">Create Simulation</button>
    <div class="form-text">The simulation will not be executed immediately.</div>
  </form>
  <div class="mt-5 w-40 ms-2">
    <jhi-mode-explanation [mode]="mode"></jhi-mode-explanation>
  </div>
</div>
