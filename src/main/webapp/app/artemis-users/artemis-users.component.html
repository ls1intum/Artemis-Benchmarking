<h2>{{ server.charAt(0) + server.slice(1).toLowerCase() }} Users</h2>
@if (isCollapsed) {
  <button
    type="button"
    class="btn btn-primary"
    (click)="collapse.toggle()"
    [attr.aria-expanded]="!isCollapsed"
    aria-controls="collapseExample"
  >
    Create user
  </button>
} @else {
  <button
    type="button"
    class="btn btn-danger"
    (click)="collapse.toggle()"
    [attr.aria-expanded]="!isCollapsed"
    aria-controls="collapseExample"
  >
    Cancel
  </button>
}
<div #collapse="ngbCollapse" [(ngbCollapse)]="isCollapsed">
  <jhi-create-user-box (createUser)="createUser($event)" (createUserPattern)="createUserPattern($event)"></jhi-create-user-box>
</div>
@if (users.length > 0) {
  <table class="table table-striped w-40 mt-3">
    <thead>
      <tr>
        <th scope="col">ID</th>
        <th scope="col">Username</th>
        <th scope="col">
          <span class="me-2">Passwords</span>
          @if (showPasswords) {
            <fa-icon [icon]="faEyeSlash" role="button" (click)="showPasswords = false" ngbTooltip="Hide passwords"></fa-icon>
          } @else {
            <fa-icon [icon]="faEye" role="button" (click)="showPasswords = true" ngbTooltip="Show passwords"></fa-icon>
          }
        </th>
        <th scope="col">
          <button type="button" class="btn btn-danger" (click)="deleteAll()">Delete All</button>
        </th>
      </tr>
    </thead>
    <tbody>
      @for (user of users; track user.serverWideId) {
        <tr>
          <td>{{ user.serverWideId }}</td>
          <td>{{ user.username }}</td>
          <td>
            @if (showPasswords) {
              {{ user.password }}
            } @else {
              <fa-icon [icon]="faEyeSlash"></fa-icon>
            }
          </td>
          <td>
            <button type="button" class="btn btn-danger" (click)="deleteUser(user.id)">Delete</button>
          </td>
        </tr>
      }
    </tbody>
  </table>
} @else {
  <div class="mt-3">No users registered for this server</div>
}
