<div class="start-wrapper">
  <div class="form-wrapper">
    <div class="input-wrapper">
      <label for="users">Number of Users</label>
      <input id="users" type="number" [(ngModel)]="numberOfUsers" />
    </div>
    <div class="input-wrapper">
      <label for="course">Course ID</label>
      <input id="course" type="number" [(ngModel)]="courseId" />
    </div>
    <div class="input-wrapper">
      <label for="exam">Exam ID</label>
      <input id="exam" type="number" [(ngModel)]="examId" />
    </div>
    <div class="input-wrapper">
      <label for="server">Server</label>
      <select id="server" [(ngModel)]="selectedServer">
        <option *ngFor="let server of ArtemisServer | keyvalue">{{ server.key }}</option>
      </select>
    </div>
  </div>
  <button class="start-button" (click)="startSimulation()" [disabled]="simulationRunning">Start Simulation</button>
</div>
<div>
  <div *ngFor="let msg of logMessages">
    <span [style.color]="msg.isError ? 'red' : 'black'">{{ msg.message }}</span
    ><br />
  </div>
</div>
<div *ngIf="simulationResult">
  <h2>Simulation Result:</h2>
  <div class="sub-result-wrapper">
    <h3>Total:</h3>
    <span>Number of requests: {{ simulationResult!.total!.numberOfRequests }}</span
    ><br />
    <span>Average response time: {{ formatDuration(simulationResult!.total!.avgResponseTime) }}</span
    ><br />
    <span>Requests by minute:</span>
    <br />
    <div *ngFor="let minute of simulationResult!.total!.requestsByMinute | keyvalue">
      <span> {{ minute.key | date: 'hh:mm' }}: {{ minute.value }}</span
      ><br />
    </div>
    <br />
    <span>Average response time by minute:</span>
    <div *ngFor="let minute of simulationResult!.total!.avgResponseTimeByMinute | keyvalue">
      <span> {{ minute.key | date: 'hh:mm' }}: {{ formatDuration(minute.value) }}</span
      ><br />
    </div>
    <br />
  </div>
  <div class="sub-result-wrapper">
    <h3>Authentication:</h3>
    <span>Number of requests: {{ simulationResult!.authenticationStats!.numberOfRequests }}</span
    ><br />
    <span>Average response time: {{ formatDuration(simulationResult!.authenticationStats!.avgResponseTime) }}</span
    ><br />
  </div>
  <div class="sub-result-wrapper">
    <h3>Get Exam:</h3>
    <span>Number of requests: {{ simulationResult!.getExamStats!.numberOfRequests }}</span
    ><br />
    <span>Average response time: {{ formatDuration(simulationResult!.getExamStats!.avgResponseTime) }}</span
    ><br />
  </div>
  <div class="sub-result-wrapper">
    <h3>Start Exam:</h3>
    <span>Number of requests: {{ simulationResult!.startExamStats!.numberOfRequests }}</span
    ><br />
    <span>Average response time: {{ formatDuration(simulationResult!.startExamStats!.avgResponseTime) }}</span
    ><br />
  </div>
  <div class="sub-result-wrapper">
    <h3>Submit Exercise:</h3>
    <span>Number of requests: {{ simulationResult!.submitExerciseStats!.numberOfRequests }}</span
    ><br />
    <span>Average response time: {{ formatDuration(simulationResult!.submitExerciseStats!.avgResponseTime) }}</span
    ><br />
  </div>
  <div class="sub-result-wrapper">
    <h3>Submit Exam:</h3>
    <span>Number of requests: {{ simulationResult!.submitExamStats!.numberOfRequests }}</span
    ><br />
    <span>Average response time: {{ formatDuration(simulationResult!.submitExamStats!.avgResponseTime) }}</span
    ><br />
  </div>
  <div class="sub-result-wrapper">
    <h3>Clone Repo:</h3>
    <span>Number of requests: {{ simulationResult!.cloneStats!.numberOfRequests }}</span
    ><br />
    <span>Average response time: {{ formatDuration(simulationResult!.cloneStats!.avgResponseTime) }}</span
    ><br />
  </div>
  <div class="sub-result-wrapper">
    <h3>Push Repo:</h3>
    <span>Number of requests: {{ simulationResult!.pushStats!.numberOfRequests }}</span
    ><br />
    <span>Average response time: {{ formatDuration(simulationResult!.pushStats!.avgResponseTime) }}</span
    ><br />
  </div>
  <div class="sub-result-wrapper">
    <h3>Misc Requests:</h3>
    <span>Number of requests: {{ simulationResult!.miscStats!.numberOfRequests }}</span
    ><br />
    <span>Average response time: {{ formatDuration(simulationResult!.miscStats!.avgResponseTime) }}</span
    ><br />
  </div>
</div>
